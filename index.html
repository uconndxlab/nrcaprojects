<!DOCTYPE html>
<html lang="en"><!-- InstanceBegin template="/Templates/nrca-main.dwt" codeOutsideHTMLIsLocked="false" -->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- InstanceBeginEditable name="doctitle" -->
<title>UConn NRCA</title>
<!-- InstanceEndEditable -->
<!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!-- end Bootstrap -->  
  <!-- UConn Banner -->
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]> 		<html class="no-js"> <![endif]-->
  <style>
/**
   * The banner assumes a margin of 0px, but is not included
   * in banner.css to avoid collisions with other themes and 
   * admin bars.
   */
body {
	margin: 0px;
}
</style>

  <!-- REPLACE THIS WITH YOUR CUSTOM BUILD OF MODERNIZR -->
  <script src="//ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.0.6-development-only.js"></script>

  <!-- Use if you need responsive layouts for IE -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
  <!-- end UConn Banner -->
  <!-- InstanceBeginEditable name="head" -->
     <!-- InstanceEndEditable -->
  <script type="text/javascript">
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
  </script>
  </head>
  <!--_______________Google Analytics Code_______________-->
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27682791-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  <!--______________end Google Analytics Code_______________-->

<!-- ______________________ -->
<div class="container">
    <div class="row-fluid">
    <div class="col-lg-12"> <!-- InstanceBeginEditable name="EditRegion3" -->
      
      <!-- COPY HTML START -->
      <!-- --------------- -->
      <style>
        body {
          font-family:"noto-sans",sans-serif!important
        }
        p{
          display: block;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
        }
      .grid-sizer {
        height: 250px;
      }
      .project-title {
        font-size: 14px;
        line-height:1.4em;
        font-weight:600;
      }
      .project-item {
        padding-left: 15px;
        padding-right: 15px;
      }
      .project-item-content {
        padding: 10px 10px 10px 10px;
        height: 350px;
        background-color:#F0F3F7;
        border:none;
        width:50%;
        margin:0px auto 20px auto;
      }

      .project-link {
        color: white;
        background:#da7b29;
        margin:0px!important;
        padding:5px 10px;
        border-radius:50px;
        
      }
      .project-link:active, .project-link:visited {
        color: white;
        text-decoration:none;
        background-color:#da7b29;
      }
      .project-link:hover{
        color: white;
        text-decoration:none;
        background-color:#F29B31;
      }

      .filter-label {
        font-weight: bold;
      }
      .filter-label {
        margin-top: 13px;
      }
      .well{
        background-color:#F0F3F7;
        border:none;
      }

      #project_filter {
          position: static;
      }

      /* Add sticky to prevent filter scroll */
      @media screen and (min-width: 767px) {
        #project_filter {
          position: sticky;
          top: 0px;
          }

        .project-item-content {
        width:100%;
      }
      }
      
      </style>

      <div class="row">
        <div class="col-md-3 col-sm-4 well" id="project_filter">
          <h2>Filter</h2>

          <div id="categories">
          <p class="filter-label">Categories</p>
            <!-- "value" should come from a category column, preceded by a "." -->
          <div class="checkbox">
            <label><input type="checkbox" class="filter" value=".biodiversity" /> Biodiversity/Wildlife/Fisheries</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".communityscience" /> Community Science</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".climatechange" /> Climate Change</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".foodwaste" /> Food Waste</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".forestry" /> Forestry</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".greeninfrastructure" /> Green Infrastructure</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".humandimensions" /> Human Dimensions</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".invasivespecies" /> Invasive Species</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".landuse" /> Land Use</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".mappinggis" /> Mapping/GIS</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".publicoutreach" /> Public Outreach</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".restoration" /> Restoration</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".soilsagriculture" /> Soils/Agriculture</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".trailbuilding" /> Trail Stewardship</label>
          </div>
          <div class="checkbox">
          <label><input type="checkbox" class="filter" value=".waterquality" /> Water Quality/Conservation</label>
          </div>
          </div>

          <label for="program" class="filter-label">Program</label>
          <select id="program" name="program" class="form-control filter">
            <option value="" selected>All</option>
            <!-- "value" should come from the capStr or ctpStr columns, preceded by a "." -->
            <option value=".cap">CAP</option>
            <option value=".ctp">CTP</option>
          </select>

          <label for="year" class="filter-label">Year</label>
          <select id="year" name="year" class="form-control filter">
            <option value="" selected>All</option>
            <!-- "value" should come from the capStr or ctpStr columns, preceded by a "." -->
            <option value=".2012">2012</option>
            <option value=".2013">2013</option>
            <option value=".2014">2014</option>
            <option value=".2015">2015</option>
            <option value=".2016">2016</option>
            <option value=".2017">2017</option>
            <option value=".2018">2018</option>
            <option value=".2019">2019</option>
            <option value=".2020">2020</option>
            <option value=".2021">2021</option>
            <option value=".2022">2022</option>
            <option value=".2023">2023</option>
          </select>

          <label for="tech" class="filter-label">Tech</label>
          <select id="tech" name="tech" class="form-control filter">
            <!-- "value" should come from one of the tech columns, preceded by a "." -->
            <option value="" selected>All</option>
            <option value=".mapping" > Mapping</option>
            <option value=".collect" > Survey/Data Collection</option>
            <option value=".wildlife" > Wildlife</option>
            <option value=".other" > Other</option>
            <option value=".low" > Low Tech</option>
          </select>

          <label for="location" class="filter-label">Location</label>
          <select id="location" name="location" class="form-control filter">
            <!-- "value" should come from the countyStr column, preceded by a "." -->
            <option value="" selected>All</option>
            <option value=".hartford"> Hartford</option>
            <option value=".newhaven"> New Haven</option>
            <option value=".litchfield"> Litchfield</option>
            <option value=".tolland"> Tolland</option>
            <option value=".fairfield"> Fairfield</option>
            <option value=".middlesex"> Middlesex</option>
            <option value=".newlondon"> New London</option>
            <option value=".windham"> Windham</option>
            <!-- <option value=".other"> Other</option> -->
          </select>
          <!-- for debug -->
          <p id="output" class="hide">--</p>
        </div>

        <div class="col-md-9 col-sm-8 container-fluid" id="projects_box">
          <div class="" id="projects">
            <div class="grid-sizer col-xs-12 col-sm-6 col-md-4"></div>
          </div>
        </div>

    </div>
    <!-- ------------- -->
    <!-- COPY HTML END -->
    <!-- ------------- -->


		
		
		
		
			

			
	
<!--___________________________________________________________--> 
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
</body>
<!-- InstanceEnd -->
	<!-- ---------------------------------------- -->
    <!-- --------- COPY JAVASCRIPT START -------- -->
    <!-- THIS JAVASCRIPT MUST APPEAR AFTER JQUERY -->
    <!-- ---------------------------------------- -->
			<script src="isotope.pkgd.min.js"></script>
    <script src="imagesloaded.pkgd.min.js"></script>
    <script>
      $(document).ready(function() {
         // isotope filtering/layout depends on all images being loaded before init
         var $projects = $('#projects').imagesLoaded( function() {
           // init Isotope after all images have loaded
           $projects.isotope({
             itemSelector: '.project-item',
             percentPosition: true,
             masonry: {
               columnWidth: '.grid-sizer'
             }
           });
         });

        // load project data
        $.getJSON("https://nrca-projects.npkn.net/nrca-projects-json/", function(data) {
          var $items;
          $.each(data, function(key, value) {
            var $item = $('<div />', {
              'class': ' col-xs-12 col-sm-6 col-md-4 project-item ' +
              value.capStr + ' ' +
              value.ctpStr + ' ' +

              value.year + ' ' +

              value.mapStr + ' ' +
              value.collectStr + ' ' +
              value.wildlifeStr + ' ' +
              value.otherStr + ' ' +
              value.lowTechStr + ' ' +

              value.biodiversityStr + ' ' +
              value.communityScienceStr + ' ' +
              value.climateChangeStr + ' ' +
              value.foodWasteStr + ' ' +
              value.forestryStr + ' ' +
              value.greenInfrastructureStr + ' ' +
              value.humanDimensionsStr + ' ' +
              value.invasiveSpeciesStr + ' ' +
              value.landUseStr + ' ' +
              value.mappingGisStr + ' ' +
              value.publicOutreachStr + ' ' +
              value.restorationStr + ' ' +
              value.soilsAgricultureStr + ' ' +
              value.trailbuildingStr + ' ' +
              value.waterQualityStr + ' ' +

              value.countyStr + ' '
            });

            var $panel = $('<div />', {
              'class': 'thumbnail project-item-content'
            });

            // if there is no thumbnail, use a generic image
            var thumbnailUrl;
            if (value.thumbnailImageUrl !== null) {
              thumbnailUrl = value.thumbnailImageUrl;
            } else {
              thumbnailUrl = 'https://via.placeholder.com/220x126';
            }
            $panel.append('<img class="img-responsive center-block" src="' + thumbnailUrl + '" width="220" height="126" alt="' + value.projectTitle + '" />');

            $panel.append('<h5 class="project-title">' + value.projectTitle + '</h5>');
            // link to the project poster
            if (value.pdfFileUrl !== "") {
              $panel.append('<p><a class="project-link pull-left" href="' + value.pdfFileUrl + '" target="_blank"><span class="fa fa-file" aria-hidden="true"></span> Poster</p>');
            }

            // Some projects link out to one or more of Google Maps, a storybook,
            // a PDF, etc.
            // Add those links here
            if (value.projectUrl !== undefined) {
              // We expect links to be comma-separated in the JSON file
              var links = value.projectUrl.split(',');

              // Figure out what kind of link it is and add descriptive inner content
              for (var i=0; i<links.length; i++) {
                var linkInner = '';
                var linkStorymap = links[i].indexOf('storymap');
                var linkMapjournal = links[i].indexOf('MapJournal');
                var linkMapseries = links[i].indexOf('MapSeries');
                var linkYoutube = links[i].indexOf('youtube');
                var linkVimeo = links[i].indexOf('vimeo');
                var linkPdf = links[i].indexOf('pdf');
                var linkArcGis = links[i].indexOf('arcg');
                var linkGoogleMaps1 = links[i].indexOf('goo.gl');
                var linkGoogleMaps2 = links[i].indexOf('google.com/maps');
                var linkTrackKit = links[i].indexOf('track-kit');

				var fullUrl = links[i].trim();

                // Add some fancy icons depending on link type.
                // StoryMap icon
                if ( linkStorymap > -1 || linkMapjournal > -1 || linkMapseries > -1) {
                  linkInner = 'StoryMap <span class="fa fa-sitemap" aria-hidden="true"></span>';
				// Video icon
                } else if ( linkYoutube > -1 || linkVimeo > -1 ) {
                  linkInner = 'Video <span class="fa fa-video-camera" aria-hidden="true"></span>';
                // PDF icon
                } else if ( linkPdf > -1 ) {
                  linkInner = 'Product <span class="fa fa-image" aria-hidden="true"></span>';
                // Map icon
                } else if ( linkArcGis > -1 || linkGoogleMaps1 > -1 || linkGoogleMaps2 > -1 || linkTrackKit > -1 ) {
                  linkInner = 'Map <span class="fa fa-globe" aria-hidden="true"></span>';
                // Link icon
                } else {
                  linkInner = 'Link <span class="fa fa-link" aria-hidden="true"></span>';
                }
				 if ( fullUrl.length > 1 ) {
          $panel.append('<p><a class="project-link pull-right" href="' + fullUrl + '" target="_blank">' + linkInner + '</a></p><br>');
				}
				}
            }

            $item.append($panel);
            $items = $items ? $items.add( $item ) : $item;
            $projects.append( $item ).isotope( 'appended', $item);
          });

          $('#project_filter input').on('change', function() {
            filter($projects);
          });

          $('select#program').on('change', function() {
            filter($projects);
          });

          $('select#year').on('change', function() {
            filter($projects);
          });

          $('select#tech').on('change', function() {
            filter($projects);
          });

          $('select#location').on('change', function() {
            filter($projects);
          });

        });

      });

      // Filter the results
      // Isotope filters based on classes.
      // Inclusive filters will generate more results.
      // Exclusive filters will generate fewer reults.

      // Inclusive filterValue: '.cats, .black'
      // Returns: cats, *anything* that is black

      // Exclusive filterValue: '.cats.black'
      // Returns: cats that are black

      // Inclusive filterValue: '.cats, .dogs'
      // Returns: cats, dogs

      // Exclusive filterValue: '.cats.black, .dogs.black'
      // Returns: cats that are black, dogs that are black

      function filter($projects) {
        var $output = $('#output');

        var $categoriesFilter = $('#categories input');
        var $programFilter = $('select#program');
        var $yearFilter = $('select#year');
        var $techFilter = $('select#tech');
        var $locationFilter = $('select#location');
        var program, year, tech, loc;

        // Categories are inclusive, return more results
        /*
        var inclusives = [];
        $categoriesFilter.each( function( i, elem ) {
          if ( elem.checked ) {
            inclusives.push( elem.value );
          }
        });*/

        // Categories are not inclusive, return less results
        var inclusives = "";
        $categoriesFilter.each( function( i, elem ) {
          if ( elem.checked ) {
            inclusives += elem.value
          }
        });
        
        // Program, Tech, and Location are exclusive, return fewer results
        program = $programFilter.val();
        year = $yearFilter.val();
        tech = $techFilter.val();
        loc = $locationFilter.val();

        // add exclusive filters so they look like '.cap.mapping.hartford'
        var exclusives = program + year + tech + loc;

        // combine inclusives and exclusives
        if (inclusives.length > 0) {
          //commented code is for the old inclusive code (additive)
          /*
          var filterList = [];
          var f = '';
          for (var i=0; i<inclusives.length; i++) {
            f = inclusives[i] + exclusives;
            filterList.push(f)
          }
          var filterValue = filterList.length ? filterList.join(', ') : '*';
          */
          
          var filterValue = inclusives + exclusives
        } else {
          filterValue = exclusives
        }

        $output.text( filterValue ); // for debugging
        $projects.isotope({ filter: filterValue });
      } // END filter
    </script>
    <!-- -------------------------------------- -->
    <!-- --------- COPY JAVASCRIPT END -------- -->
    <!-- -------------------------------------- -->
</html>